# Encrypt Labs

一个专为JavaScript逆向工程打造的训练靶场，灵感来源：https://github.com/SwagXz/encrypt-labs。
本项目提供了一系列前端加密挑战，旨在模拟真实的Web应用场景。它为安全研究员、渗透测试工程师以及希望提升客户端代码分析与解构技能的开发者而设计。

项目拥有一个现代化的交互界面，用户可以通过侧边栏轻松切换不同的挑战关卡，并为不同难度的模式提供了独特的主题颜色（简单模式为蓝色，困难模式为红色）。

后端服务由一个轻量级的Go服务器实现，负责校验客户端发送的加密负载。

## 挑战关卡

本靶场目前包含以下加密挑战，在初始登录后即可访问：

#### 对称加密
*   **AES (固定密钥)**：客户端使用硬编码在代码中的密钥与IV进行加密。
*   **AES (服务端密钥)**：客户端必须先从特定API端点获取密钥与IV，再执行加密。
*   **DES (规律密钥)**：DES密钥与IV根据用户输入，按照特定规律动态生成。

#### 非对称加密
*   **RSA**：客户端使用标准的公钥对数据进行RSA加密。

#### 混合加密
*   **AES + RSA**：客户端动态生成一个随机AES密钥来加密数据，然后使用RSA公钥对该AES密钥本身进行加密后一并发送。

#### 完整性与抗篡改
*   **HMAC签名 (客户端密钥)**：使用存在于客户端的共享密钥对请求负载进行签名。
*   **HMAC签名 (服务端密钥)**：客户端必须从服务端获取临时密钥来对请求进行签名。

#### 抗重放攻击
*   **时间戳Nonce**：请求中包含一个经过RSA加密的当前时间戳，用于防止重放攻击。

### 相比于原版，增加了：
*   **重构后端**：使用了更简单的Go+内存SQLite，方便搭建，专注于靶场本身。
*   **动态获取RSA公钥的混合加密模式**：新增并重构了“AES随机Key”关卡。客户端现在需要先从服务端API动态获取RSA公钥，然后再使用混合加密（AES+RSA）完成挑战。
*   **重新混淆代码**：hard模式的JS经过了javascript-obfuscator的重新混淆。

## 快速开始

### 直接运行
打包好的二进制文件可直接运行（这个不用我写吧，不用吧不用吧？？）

### 编译运行
请确保您的系统中已安装Go语言环境。
1. 启动服务：
    ```bash
    go run main.go
    ```

## 使用说明

靶场提供了一个清晰、现代化的用户界面，旨在简化挑战流程。

1.  **选择模式**：在首页，您可以选择进入“简单模式”或“困难模式”。
2.  **选择关卡**：进入挑战页面后，左侧的侧边栏会列出该模式下的所有可用关卡。默认选中第一个关卡。
3.  **发起挑战**：点击侧边栏中的任意关卡即可切换。右侧的表单（包含用户名和密码输入框）和“登录”按钮是所有关卡共用的。点击“登录”按钮，即可对当前选中的关卡发起挑战。

您的目标是分析客户端JavaScript代码（位于 `static/js/` 目录下），理解每个挑战的加密逻辑，并成功构造出能通过后端验证的请求。

## 路线图 (Roadmap)

为提升靶场的复杂度与广度，未来计划开发以下挑战：

- [ ] **地狱难度**：JS代码混淆的同时，所有数据包均防回放。
- [ ] **高级代码混淆挑战**：实现一个利用高级混淆技术的关卡，例如控制流平坦化、字符串加密和僵尸代码注入（可使用 `javascript-obfuscator` 等工具）。
- [ ] **WebAssembly (WASM) 挑战**：将核心加密函数迁移至由C/C++或Rust编译的WASM模块中，强制要求分析二进制格式而非普通JS代码。
- [ ] **代码虚拟化 (VMP) 挑战**：设计一个基于JavaScript的自定义虚拟机来执行核心逻辑的关卡，要求逆向分析其指令集与字节码。
- [ ] **防重放模式切换**：将“禁止重放”功能实现为一个可选项，而不是独立的关卡。该选项可以应用于所有其他加密挑战，为每个挑战增加“可重放”和“不可重放”两种模式。

## 贡献

欢迎任何形式的贡献。
